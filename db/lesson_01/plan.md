
# План занятия №1 03 апреля 2024 г.

1. Задачи курса и что вы будете уметь после курса:

**Задачи курса:**
- понимание роли и функций - зачем нужны СУБД, для чего они используются?
- умение использовать - как и какими способами создавать и подключаться?
- основы языка sql-запросов - как получать нужную информацию (выборки) из базы данных?
- практические навыки использования в проектах.

**Умения после курса:**
- установка необходимого ПО, создание и подключение к СУБД;
- моделирование, проектирование таблиц и связей;
- формирование sql-запросов.

2. Клиент-серверная архитектура и место СУБД в ней - рисуем схему.

3. Основные функции СУБД - см. теория.

4. Необходимый минимум теоретических знаний - см. теория:
   - Модели данных
   - Базовые структуры данных
   - Степени абстракции данных
   - Типы данных

5. Концепция CRUD и агрегация данных - см. теория.

6. SQL запросы - практика.

Наш "полигон" на сегодня: 

[Песочница (интернет-магазин)](https://www.w3schools.com/sql/trysql.asp?filename=trysql_select_all)

**Примеры и задания:**

```sql
-- вывести всех клиентов
SELECT *
FROM Customers

SELECT
  Country, -- проекция (полей)
  City
FROM Customers
```

```sql
-- вывести страны клиентов (только уникальные значения - без дублей)
SELECT DISTINCT
  Country -- проекция
FROM Customers
```

**Задача. Вывести данные о поставщиках**

(проекция: `название_компании`, `страна`)

```sql

```

## Фильтрация в SQL / Оператор `WHERE`

**Пример. Вывести клиентов из `Germany`**

```sql
SELECT *
FROM Customers
WHERE
  Country='Germany'
```

**Задача. Вывести город и почтовый индекс клиентов из `France`**

```sql

```

## Операторы сравнения

- `=` равно
- `!=` `<>` не равно
- `>`больше
- `<`меньше
- `>=` больше или равно
- `<=` меньше или равно

## Логические операторы (приоритет - сверху вниз)

- `NOT` логическое отрицание (унарный)
- `AND` логическое И (бинарный)
- `OR` логическое ИЛИ (бинарный)

**Пример. Вывести клиентов из `Germany` (`Berlin`)**

```sql
SELECT *
FROM Customers

WHERE
  Country='Germany'
  AND
  City='Berlin'
```

**Пример. Вывести клиентов не из `Germany`**

```sql
SELECT *
FROM Customers

WHERE
  NOT Country = 'Germany'
-- Country != 'Germany'
-- Country <> 'Germany'
```

**Задача. Вывести товары с ценой от `50` до `100` EUR**

```sql

```

**Задача. Вывести клиентов из `Germany` и `France`**

```sql

```

**Задача. Вывести клиентов, кроме тех, что из `UK` и `USA`**

```sql

```

**Задача. Вывести номера телефонов поставщиков из `UK` и `Brazil`**

```sql

```

## Оператор `IN`

**Пример.**
- проверка принадлежности к списку значений

```sql
SELECT *
FROM Customers
WHERE
  Country='Germany'
   OR
  Country='France'
--

SELECT *
FROM Customers
WHERE
  Country IN ('Germany', 'France')
```

```sql
SELECT *
FROM Customers

WHERE
  NOT Country='UK'
  AND
  NOT Country='USA'

--
SELECT *
FROM Customers
WHERE
  NOT Country IN ('UK', 'USA')
-- Country NOT IN ('UK', 'USA')
```

**Задача. Вывести название и стоимость товаров из категорий `1` и `3` со стоимостью до `50` EUR**

```sql

```

**Задача. Вывести товары с ценой от `80` до `190` EUR не из категории `5`**

```sql

```

## Оператор диапазона `BETWEEN`

**Пример**

```sql
SELECT *
FROM Products
WHERE
  Price BETWEEN 80 AND 190
  AND
  NOT CategoryID=5
```

**Задача. Вывести товары с ценой от `10` до `50` EUR из категорий `1, 2, 3`**

```sql

```

## Сортировка в SQL / Оператор `ORDER BY`

**Пример**

```sql
SELECT *
FROM Products
ORDER BY Price DESC
-- DESC - по убыванию
-- ASC - по возрастанию (по умолчанию)
```

**Задача. Вывести товары из `5` категории по возрастанию цены**

```sql

```

## Лимитирование вывода / Оператор `LIMIT`

- Как правило, применяется для:
    - постраничного (порционного) вывода (напр., товаров в каталоге)
    - вывода блока рекомендаций

**Пример. Вывести три самых дорогих товара**

```sql
SELECT *
FROM Products
ORDER BY Price DESC

  LIMIT 3 OFFSET 0 -- стр. 1
-- LIMIT 3 OFFSET 3 -- стр. 2
-- LIMIT 3 OFFSET 6 -- стр. 3
```

```sql
-- пример формулы смещения (OFFSET)
PAGE = 1
LIMIT = 3
OFFSET = LIMIT * (PAGE - 1)
```

**Задача. Вывести название и стоимость одного самого дорогого товара из категории `1`**

```sql

```

**Задача. Вывести товар, который находится на третьем месте среди самых дорогих**

```sql

```

## Псевдонимы в SQL / Оператор `AS`

**Примеры**

```sql
SELECT
		ProductName,
    Price AS Price_eur,
    Price * 1.05 AS Price_usd
FROM Products
```

```sql
SELECT *,
	Price * 1.05 AS Price_usd
FROM Products
```

```sql
SELECT *,
	Price * .95 AS Price_down
FROM Products
```

**Задача. Вывести названия товаров, а также их стоимость:**

- полную
- со скидкой в '25%'
- с наценкой в `15%`

```sql

```

**Пример оформления Д/З**

```sql
-- файл homework.sql
--
-- Задача 1. Вывести ...
SELECT ...

-- Задача 2. Вывести ...
SELECT ...
```